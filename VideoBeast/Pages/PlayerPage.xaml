<Page
	x:Class="VideoBeast.Pages.PlayerPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d">

	<Grid
		x:Name="LayoutRoot"
		PointerMoved="PlayerArea_PointerMoved"
		PointerPressed="PlayerArea_PointerPressed"
		Tapped="PlayerArea_Tapped">
		<Border
			x:Name="CardShell"
			Margin="5"
			Padding="0"
			Background="Transparent"
			BorderBrush="Transparent"
			BorderThickness="0"
			CornerRadius="0">

			<Grid RowSpacing="10">
				<Grid.RowDefinitions>
					<RowDefinition Height="*" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>

				<!--  Player host  -->
				<Grid Grid.Row="0">
					<Border
						x:Name="PlayerHost"
						Background="#FF000000"
						BorderBrush="{StaticResource Stroke}"
						BorderThickness="1"
						CornerRadius="16">

						<Grid
							x:Name="PlayerArea"
							Margin="0"
							Padding="0"
							PointerMoved="PlayerArea_PointerMoved"
							PointerPressed="PlayerArea_PointerPressed"
							Tapped="PlayerArea_Tapped">

							<MediaPlayerElement
								x:Name="Player"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch"
								AreTransportControlsEnabled="False"
								AutoPlay="False"
								Background="Black"
								Stretch="UniformToFill" />

							<!--  ControlBar  -->
							<Border
								x:Name="ControlBar"
								Margin="12"
								Padding="10"
								VerticalAlignment="Bottom"
								Background="#AA111111"
								BorderBrush="{StaticResource Stroke}"
								BorderThickness="1"
								CornerRadius="12"
								Opacity="1"
								PointerEntered="ControlBar_PointerEntered"
								PointerExited="ControlBar_PointerExited">

								<StackPanel Spacing="10">

									<!--  Seek row  -->
									<Grid ColumnSpacing="10">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="*" />
											<ColumnDefinition Width="Auto" />
										</Grid.ColumnDefinitions>

										<TextBlock
											x:Name="PositionText"
											Grid.Column="0"
											FontSize="12"
											Foreground="White"
											Text="0:00" />

										<Slider
											x:Name="SeekSlider"
											Grid.Column="1"
											Maximum="1"
											Minimum="0"
											SnapsTo="StepValues"
											StepFrequency="0.1"
											ValueChanged="SeekSlider_ValueChanged"
											Value="0" />

										<TextBlock
											x:Name="DurationText"
											Grid.Column="2"
											FontSize="12"
											Foreground="White"
											Text="0:00" />
									</Grid>

									<!--  Buttons row  -->
									<Grid ColumnSpacing="12">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="*" />
											<ColumnDefinition Width="Auto" />
											<ColumnDefinition Width="Auto" />
										</Grid.ColumnDefinitions>

										<Button
											x:Name="PlayPauseButton"
											Grid.Column="0"
											Click="PlayPause_Click">
											<StackPanel Orientation="Horizontal" Spacing="8">
												<SymbolIcon x:Name="PlayPauseIcon" Symbol="Play" />
												<TextBlock
													x:Name="PlayPauseText"
													Foreground="White"
													Text="Play" />
											</StackPanel>
										</Button>

										<Button Grid.Column="1" Click="Stop_Click">
											<SymbolIcon Symbol="Stop" />
										</Button>

										<ToggleButton
											x:Name="LoopToggle"
											Grid.Column="2"
											Click="LoopToggle_Click"
											ToolTipService.ToolTip="Loop">
											<SymbolIcon Symbol="RepeatAll" />
										</ToggleButton>

										<ToggleButton
											x:Name="MuteToggle"
											Grid.Column="3"
											Click="MuteToggle_Click"
											ToolTipService.ToolTip="Mute">
											<SymbolIcon x:Name="MuteIcon" Symbol="Volume" />
										</ToggleButton>

										<StackPanel
											Grid.Column="4"
											VerticalAlignment="Center"
											Orientation="Horizontal"
											Spacing="8">
											<TextBlock
												FontSize="12"
												Foreground="White"
												Text="Vol" />
											<Slider
												x:Name="VolumeSlider"
												Width="160"
												LargeChange="10"
												Maximum="100"
												Minimum="0"
												SmallChange="1"
												SnapsTo="StepValues"
												StepFrequency="1"
												ValueChanged="VolumeSlider_ValueChanged" />

										</StackPanel>

										<Grid Grid.Column="5" />

										<ComboBox
											x:Name="RateCombo"
											Grid.Column="6"
											Width="110"
											SelectionChanged="RateCombo_SelectionChanged">
											<ComboBoxItem Content="0.5x" Tag="0.5" />
											<ComboBoxItem
												Content="1.0x"
												IsSelected="True"
												Tag="1.0" />
											<ComboBoxItem Content="1.25x" Tag="1.25" />
											<ComboBoxItem Content="1.5x" Tag="1.5" />
											<ComboBoxItem Content="2.0x" Tag="2.0" />
										</ComboBox>

										<ToggleButton
											x:Name="FullWindowToggle"
											Grid.Column="7"
											Click="FullWindowToggle_Click"
											ToolTipService.ToolTip="Full screen">
											<SymbolIcon Symbol="FullScreen" />
										</ToggleButton>
									</Grid>
								</StackPanel>
							</Border>
						</Grid>
					</Border>

					<!--  Empty state  -->
					<Border
						x:Name="EmptyState"
						Background="{StaticResource Card2}"
						BorderBrush="{StaticResource Stroke}"
						BorderThickness="1"
						CornerRadius="16"
						Opacity="0.98"
						Visibility="Collapsed">
						<StackPanel
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							Spacing="10">
							<TextBlock
								HorizontalAlignment="Center"
								FontSize="22"
								FontWeight="SemiBold"
								Text="Pick a folder, then import MP4s" />
							<TextBlock
								HorizontalAlignment="Center"
								Foreground="{StaticResource TextFaint}"
								Text="Use the left navigation pane to browse folders/files." />
						</StackPanel>
					</Border>
				</Grid>

			</Grid>
		</Border>

		<VisualStateManager.VisualStateGroups>

			<!--  ControlBar fade  -->
			<VisualStateGroup x:Name="ControlsStates">
				<VisualState x:Name="ControlsVisible">
					<Storyboard>
						<DoubleAnimation
							Storyboard.TargetName="ControlBar"
							Storyboard.TargetProperty="Opacity"
							To="1"
							Duration="0:0:0.15" />
					</Storyboard>
				</VisualState>

				<VisualState x:Name="ControlsHidden">
					<Storyboard>
						<DoubleAnimation
							Storyboard.TargetName="ControlBar"
							Storyboard.TargetProperty="Opacity"
							To="0"
							Duration="0:0:0.20" />
					</Storyboard>
				</VisualState>
			</VisualStateGroup>

			<!--  Fill-the-window mode  -->
			<VisualStateGroup x:Name="PlayerWindowStates">
				<VisualState x:Name="PlayerNormal" />

				<VisualState x:Name="PlayerFullWindow">
					<VisualState.Setters>
						<Setter Target="CardShell.Margin" Value="0" />
						<Setter Target="CardShell.Padding" Value="0" />
						<Setter Target="CardShell.CornerRadius" Value="0" />
						<Setter Target="CardShell.BorderThickness" Value="0" />

						<Setter Target="PlayerHost.CornerRadius" Value="0" />
						<Setter Target="PlayerHost.BorderThickness" Value="0" />

						<Setter Target="ControlBar.Margin" Value="16" />
					</VisualState.Setters>
				</VisualState>
			</VisualStateGroup>

		</VisualStateManager.VisualStateGroups>
	</Grid>
</Page>
