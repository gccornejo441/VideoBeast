<Page
    x:Class="VideoBeast.Pages.PlaylistPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

	<Page.Resources>
		<Style x:Key="PlaylistListViewItemStyle" TargetType="ListViewItem">
			<Setter Property="Padding" Value="0" />
			<Setter Property="Margin" Value="0,2" />
			<Setter Property="HorizontalContentAlignment" Value="Stretch" />
			<Setter Property="Background" Value="Transparent" />
			<Setter Property="BorderThickness" Value="1" />
			<Setter Property="BorderBrush" Value="Transparent" />
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ListViewItem">
						<Grid>
							<Border
                                x:Name="RowRoot"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
								<ContentPresenter
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}" />
							</Border>

							<VisualStateManager.VisualStateGroups>
								<VisualStateGroup x:Name="CommonStates">
									<VisualState x:Name="Normal" />
									<VisualState x:Name="PointerOver">
										<VisualState.Setters>
											<Setter Target="RowRoot.Background" Value="#1AFFFFFF" />
											<Setter Target="RowRoot.BorderBrush" Value="#33FFFFFF" />
										</VisualState.Setters>
									</VisualState>
									<VisualState x:Name="Pressed">
										<VisualState.Setters>
											<Setter Target="RowRoot.Background" Value="#22FFFFFF" />
											<Setter Target="RowRoot.BorderBrush" Value="#55FFFFFF" />
										</VisualState.Setters>
									</VisualState>
									<VisualState x:Name="Disabled">
										<VisualState.Setters>
											<Setter Target="RowRoot.Opacity" Value="0.5" />
										</VisualState.Setters>
									</VisualState>
								</VisualStateGroup>

								<VisualStateGroup x:Name="SelectionStates">
									<VisualState x:Name="Unselected" />
									<VisualState x:Name="Selected">
										<VisualState.Setters>
											<Setter Target="RowRoot.Background" Value="#222222" />
											<Setter Target="RowRoot.BorderBrush" Value="#666666" />
										</VisualState.Setters>
									</VisualState>
									<VisualState x:Name="SelectedPointerOver">
										<VisualState.Setters>
											<Setter Target="RowRoot.Background" Value="#222222" />
											<Setter Target="RowRoot.BorderBrush" Value="#777777" />
										</VisualState.Setters>
									</VisualState>
								</VisualStateGroup>
							</VisualStateManager.VisualStateGroups>
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<MenuFlyout x:Key="PlaylistFileFlyout">
			<MenuFlyoutItem Click="Playlist_Play_Click" Text="Play">
				<MenuFlyoutItem.Icon>
					<SymbolIcon Symbol="Play" />
				</MenuFlyoutItem.Icon>
			</MenuFlyoutItem>

			<MenuFlyoutItem Click="Playlist_ShowInFolder_Click" Text="Show in folder">
				<MenuFlyoutItem.Icon>
					<SymbolIcon Symbol="Find" />
				</MenuFlyoutItem.Icon>
			</MenuFlyoutItem>

			<MenuFlyoutSeparator />

			<MenuFlyoutItem Click="Playlist_CopyPath_Click" Text="Copy path">
				<MenuFlyoutItem.Icon>
					<SymbolIcon Symbol="Copy" />
				</MenuFlyoutItem.Icon>
			</MenuFlyoutItem>

			<MenuFlyoutItem Click="Playlist_Rename_Click" Text="Rename">
				<MenuFlyoutItem.Icon>
					<SymbolIcon Symbol="Edit" />
				</MenuFlyoutItem.Icon>
			</MenuFlyoutItem>

			<MenuFlyoutSeparator />

			<MenuFlyoutItem Click="Playlist_Delete_Click" Text="Delete">
				<MenuFlyoutItem.Icon>
					<SymbolIcon Symbol="Delete" />
				</MenuFlyoutItem.Icon>
			</MenuFlyoutItem>
		</MenuFlyout>
	</Page.Resources>

	<Grid Padding="12" RowSpacing="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Grid Grid.Row="0" ColumnSpacing="8">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<TextBlock x:Name="PlaylistTitle" FontSize="18" FontWeight="SemiBold" Text="Playlist"/>

			<Button Grid.Column="1" Click="PlaylistRefresh_Click" ToolTipService.ToolTip="Refresh folder">
				<SymbolIcon Symbol="Refresh"/>
			</Button>
		</Grid>

		<TextBox
            x:Name="PlaylistFilterBox"
            Grid.Row="1"
            PlaceholderText="Filter videosâ€¦"
            TextChanged="PlaylistFilterBox_TextChanged" />

		<ListView
            x:Name="FilesList"
            Grid.Row="2"
            IsItemClickEnabled="True"
            ItemClick="FilesList_ItemClick"
            RightTapped="FilesList_RightTapped">

			<ListView.ItemContainerStyle>
				<Style BasedOn="{StaticResource PlaylistListViewItemStyle}" TargetType="ListViewItem">
					<Setter Property="ContextFlyout" Value="{StaticResource PlaylistFileFlyout}" />
				</Style>
			</ListView.ItemContainerStyle>

			<ListView.ItemTemplate>
				<DataTemplate>
					<Grid Padding="8" ColumnSpacing="10">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Grid.Column="0" Symbol="Video"/>

						<StackPanel Grid.Column="1" Spacing="2">
							<TextBlock Text="{Binding Name}" TextTrimming="CharacterEllipsis"/>
							<TextBlock FontSize="12" Opacity="0.7" Text="{Binding FileType}"/>
						</StackPanel>
					</Grid>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>
	</Grid>
</Page>
